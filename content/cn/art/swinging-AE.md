---
title: "AE设计-摇摆效果"
date: 2023-01-04T19:27:37+10:00
draft: false
weight: 4
featured_image: "/images/art.jpg"
---

![5](https://i.postimg.cc/tChkQydM/swinging.gif)

<!--more-->

## 制作细节

1. 新建合成，1080x1080，6 秒，30 帧
2. 双击椭圆工具，自动生成一个位于中心位置的圆，修改该图层名为“ball”，修改椭圆路径，将其大小改为 400x400
3. 双击矩形工具，自动生成一个位于中心位置填满背景的矩形，修改该图层名为"BG"，移动该图层至“ball”的下层
4. 点击“钢笔”工具，“alt”或是“option”+“鼠标左键”，点击菜单栏的填充，删除其填充，修改描边像素为 20px
5. 菜单栏->视图->显示网格->对齐到网格，新建一个垂直的线，修改该图层名为“string”
6. 取消显示"网格"，按住“y”后点击 ball 显示锚点，点击锚点，同时按住“shift”拖拽锚点至线的顶端
   ![1](https://i.postimg.cc/NfbfL2Qq/2.png)
7. 建立 ball 和 string 之间的子父级关系，string 为父，修改 string 的“旋转”变换，即可实现线与球的同步摇摆
8. 将帧移动到 2f 位置，拖拽一个 marker，命名为“start”，将帧移动到 4f 位置，拖拽一个 marker，命名为“end”
9. 在“start”marker 的位置，按下“B”，在”end“start 的位置按下“N”，表示一段循环将在此段展开
10. 按下“R”设定旋转角度，在 start 位置设定角度为 20°，设定关键帧，在 start 和 end 中间位置，大约 3f 时刻，设定角度为-20°，在 end 位置设定角度为 20°
11. 选中所有关键帧，F9 设定为缓动
12. 设定摆动的幅度和速度，方法一：点击旋转关键帧的图标按钮“将此属性包含在图表编辑器中”，同时点击菜单栏“图表编辑器”->“编辑速度图表”；方法二：选中所有的关键帧，右击“设定关键帧速度”，修改“进来速度”和“输出速度”为 50%
    ![2](https://i.postimg.cc/wBDBqfvF/3.png)
    ![3](https://i.postimg.cc/VvZfG2Gs/4.png)
13. 丰富真实性，在 ball 下方设定阴影，新建形状图层，命名为“shadow”，新建一个圆形，修改椭圆路径，大小为 300x50，修改位置于球体的正下方（此时关键帧为 ball 垂直于屏幕），修改填充的颜色，比背景的颜色略深。
14. 选择 shadow，按下“P”，只显示位置属性，在 x 位置（540）后“-150”，同时设定关键帧，在 3f 处，在 x 位置“540+150”，复制 2f 位置的关键帧，粘贴到 4f 位置。选中所有的关键帧,F9 缓动，同样修改关键帧的输出输出速度为“50%”
15. 为了让阴影越贴近地面，大小越大，远离则越小，选择 shadow 图层，“shift+s”显示“缩放”属性，在 2f 位置，调整大小为 90%，设定关键帧，在 2f 和 3f 中间，调整大小为 110%，在 3f 调整大小为 90%，在 3f 位置，复制前三帧，粘贴后三帧。选中这些关键帧，F9 缓动
16. 绘制 ball 的两个眼睛，新建椭圆图层，修改大小为 60x60，位置分别为(-75,0)，ctrl+d，复制图层，修改位置为(75,0)，将两个 eye 的子级添加到 ball 上
17. 绘制 ball 的嘴巴，新建钢笔形状图层，修改描边->线段端点->圆头端点，将 mouse 的子级添加到 eye 上
18. 增加 ball 的眼动细节，选中两个 eye，按下“p”设定位置属性，在 2f 位置同时修改 x 位置于-20，设定关键帧，在 3f 时刻，x 位置为 20，4f 时刻，x 位置为-20，选中所有的关键帧 F9 缓动，为了让眼动的细节在循环时候有所延迟，选中所有的关键帧，将其往后拖动 0：15f，alt+点击“时钟”，键入“loopIn()”
19. 增加 ball 眨眼的细节，分别对两个眼睛的椭圆路径，大小，可以按住“U”只观察添加了关键帧的属性条，修改 y 位置，在 2：10f 位置，y 位置为 60，+2f 时 y 位置为 0，再+2f 时 y 位置为 60；选中两个 y 位置为 60 的关键帧，F9 缓动
20. 增加 ball 嘴巴的细节，对嘴巴的路径和描边宽度添加关键帧，按下 U，回到关键帧属性条，在 3f 处，修改描边宽度为 35，在 2f 处，修改钢笔路径令弧度稍微窄一些，同时减少描边宽度到 20
21. 为 ball 绘制左腿，新建钢笔形状图层，命名为“left leg”，修改描边->线段端点->圆头端点，按下 y，拖拽锚点于大腿低端，将它的子级添加到 ball 上，在 start 位置，新建关键帧，R 修改旋转属性，改为 25°，在 end 和 start 中间，修改角度为-25°，在 end 处粘贴 start 处的属性设定，将所有关键帧设置为缓动。为了让腿部的细节在循环时候有所延迟，选中所有的关键帧，将其往后拖动 0：15f，alt+点击“时钟”，键入“loopIn()”
22. 增加 ball 腿部的细节，让腿部的低端呈弯曲状，选择 left leg 图层，选择钢笔工具中的“转化顶点工具”，将直线钢笔转为 bezier 曲线，设定路径的关键帧，令其弯曲。

    ![5](https://i.postimg.cc/dVP1bcQD/5.png)
    ![6](https://i.postimg.cc/XNtdYh76/6.png)

    在 end 和 start 中间时，bend 腿的弧度，复制 start 时的关键帧于 end 时刻，所有关键帧 F9 缓动，alt+点击“时钟”，键入以下代码，并且将这部分关键帧，提前 0：20f 左右

    ```
    if (numKeys>1 && time>key(numKeys).time){
    	t1=key(1).time;
    	t2=key(numKeys).time;
    	span=t2-t1;
    	delta=time-t2;
    	t=delta%span;
    	valueAtTime(t1+t)
    	}
    else
    	 value
    ```

23. 为 ball 的腿部增加一个脚脚，同样新建一个钢笔图层，命名为“left foot”，修改描边->线段端点->圆头端点，按下 y，拖拽锚点于脚的上部，将它的子级添加到 left leg 上，按下 R，在 start 处新建关键帧，修改角度为+10°，中间时刻，修改角度为+30°，复制 start 时的关键帧于 end 时刻，所有关键帧 F9 缓动，alt+点击“时钟”，键入“loopIn()”

    ![5](https://i.postimg.cc/Pq0F4yQG/8.png)
    ![5](https://i.postimg.cc/g2CvtTQK/7.png)

    按下 U，显示 left leg 的关键帧，将 left foot 的关键帧，至于 left leg 摆动的关键帧后面一点点。

    ![5](https://i.postimg.cc/3r2J2bFT/9.png)

24. 按下“ctrl+D”，复制左腿和左脚，命名为 right leg 和 right foot，新建一个空对象（null），将 null 设定为 ball 的子级，将 right leg 设定为 null 的子级，按住 s，进入缩放属性，调整缩放大小为-100，100.如果出现腿的位置偏离了正确位置，可以移动空对象方块的位置直至正确。成功后可以删除空对象。

    ![6](https://i.postimg.cc/gJTRRtVR/10.png)

25. 但是右腿的顺序和左腿的摇摆顺序也镜像了，因此需要重新调整，具体做法是，将 right leg 和 right foot 的所有关键帧，往右边移动到（最左边的一帧达到 2：20f），然后将 right leg path 的三个关键帧，移动到（最后边的一帧停留在 2：20f 处），这样做的目的是，右腿迟了左腿一个半个循环，可以刚好同样摆动频率。

    ![5](https://i.postimg.cc/G2yYFJq5/swinging.gif)

## 将 AE 转为 gif

1. 在 AE 中，选择菜单栏->合成->添加到渲染队列->输出的格式为.avi->点击渲染，得到一个文件后缀为.avi 文件
2. 用 PS 打开该文件，选择菜单栏文件->导出->储存为 web 所用格式->将输出格式调整为 gif，循环选项中，将循环选为“永远”，完成储存。
